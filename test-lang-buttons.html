<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Boutons Langue</title>
    <link rel="stylesheet" href="src/assets/css/main.css">
    <link rel="stylesheet" href="src/assets/css/navigation.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-family);
        }
        .test-content {
            margin-left: 0;
            padding: 20px;
            background: var(--bg-light);
            min-height: 100vh;
        }
        @media (min-width: 769px) {
            .test-content {
                margin-left: var(--sidebar-width);
            }
        }
        @media (max-width: 768px) {
            .test-content {
                padding-top: calc(70px + 20px);
            }
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
        }
        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status-visible {
            background: var(--success-color);
            color: white;
        }
        .status-hidden {
            background: var(--gray);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Desktop Language Toggle -->
    <div class="language-toggle desktop-only">
        <button id="lang-fr-desktop" class="lang-btn active" onclick="switchLanguage('fr')">
            <i class="fas fa-flag"></i> FR
        </button>
        <button id="lang-en-desktop" class="lang-btn" onclick="switchLanguage('en')">
            <i class="fas fa-flag"></i> EN
        </button>
    </div>

    <!-- Mobile Header -->
    <div class="mobile-header">
        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" id="mobile-menu-btn" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Mobile Language Toggle -->
        <div class="language-toggle mobile-only">
            <button id="lang-fr-mobile" class="lang-btn active" onclick="switchLanguage('fr')">
                <i class="fas fa-flag"></i> FR
            </button>
            <button id="lang-en-mobile" class="lang-btn" onclick="switchLanguage('en')">
                <i class="fas fa-flag"></i> EN
            </button>
        </div>
    </div>

    <!-- Navigation Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-seedling"></i>
                <span>AgriBot Solutions</span>
            </div>
        </div>
    </nav>

    <div class="test-content">
        <div class="test-section">
            <h1>üåê Test des Boutons de Langue</h1>
            <p>V√©rification que les boutons FR/EN sont visibles sur desktop ET mobile.</p>
        </div>
        
        <div class="test-section">
            <h2>üì± √âtat actuel :</h2>
            <p><strong>Taille d'√©cran :</strong> <span id="screen-size">Chargement...</span></p>
            <p><strong>Langue actuelle :</strong> <span id="current-lang">FR</span></p>
        </div>
        
        <div class="test-section">
            <h2>üëÄ Visibilit√© des boutons :</h2>
            <p>
                <strong>Desktop (haut droite) :</strong> 
                <span id="desktop-status" class="status-indicator">V√©rification...</span>
            </p>
            <p>
                <strong>Mobile (header) :</strong> 
                <span id="mobile-status" class="status-indicator">V√©rification...</span>
            </p>
        </div>
        
        <div class="test-section">
            <h2>üéØ Instructions de test :</h2>
            <ul>
                <li>‚úÖ <strong>Desktop (>768px)</strong> : Boutons FR/EN visibles en haut √† droite</li>
                <li>‚úÖ <strong>Mobile (‚â§768px)</strong> : Boutons FR/EN visibles dans le header mobile</li>
                <li>‚úÖ <strong>Synchronisation</strong> : Cliquer sur un bouton met √† jour les deux versions</li>
                <li>‚úÖ <strong>√âtat actif</strong> : Le bouton de la langue actuelle doit √™tre surlign√©</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h2>üîß Test manuel :</h2>
            <button onclick="switchLanguage('fr')" style="margin-right: 10px; padding: 10px 20px; background: var(--primary-color); color: white; border: none; border-radius: 4px; cursor: pointer;">
                Forcer FR
            </button>
            <button onclick="switchLanguage('en')" style="padding: 10px 20px; background: var(--secondary-color); color: white; border: none; border-radius: 4px; cursor: pointer;">
                Forcer EN
            </button>
        </div>
    </div>

    <script src="src/assets/js/i18n.js"></script>
    <script src="src/assets/js/main.js"></script>
    <script>
        function updateStatus() {
            const width = window.innerWidth;
            const isMobile = width <= 768;
            
            // Update screen size
            document.getElementById('screen-size').textContent = `${width}px √ó ${window.innerHeight}px (${isMobile ? 'Mobile' : 'Desktop'})`;
            
            // Check visibility of buttons
            const desktopToggle = document.querySelector('.desktop-only');
            const mobileToggle = document.querySelector('.mobile-only');
            
            const desktopVisible = window.getComputedStyle(desktopToggle).display !== 'none';
            const mobileVisible = window.getComputedStyle(mobileToggle).display !== 'none';
            
            // Update status indicators
            const desktopStatus = document.getElementById('desktop-status');
            const mobileStatus = document.getElementById('mobile-status');
            
            if (desktopVisible) {
                desktopStatus.textContent = 'VISIBLE';
                desktopStatus.className = 'status-indicator status-visible';
            } else {
                desktopStatus.textContent = 'CACH√â';
                desktopStatus.className = 'status-indicator status-hidden';
            }
            
            if (mobileVisible) {
                mobileStatus.textContent = 'VISIBLE';
                mobileStatus.className = 'status-indicator status-visible';
            } else {
                mobileStatus.textContent = 'CACH√â';
                mobileStatus.className = 'status-indicator status-hidden';
            }
        }
        
        // Override switchLanguage to update display
        const originalSwitchLanguage = window.switchLanguage;
        window.switchLanguage = function(lang) {
            if (originalSwitchLanguage) {
                originalSwitchLanguage(lang);
            }
            document.getElementById('current-lang').textContent = lang.toUpperCase();
            
            // Manual sync for this test
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const desktopBtn = document.getElementById(`lang-${lang}-desktop`);
            const mobileBtn = document.getElementById(`lang-${lang}-mobile`);
            
            if (desktopBtn) desktopBtn.classList.add('active');
            if (mobileBtn) mobileBtn.classList.add('active');
        };

        window.addEventListener('resize', updateStatus);
        document.addEventListener('DOMContentLoaded', updateStatus);
        
        // Update status every second to catch any changes
        setInterval(updateStatus, 1000);
    </script>
</body>
</html>
